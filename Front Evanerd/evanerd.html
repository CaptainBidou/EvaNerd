<meta charset="utf-8">
<link rel="stylesheet" href="Bootstrap/css/bootstrap.min.css">
<link rel="stylesheet" href="Bootstrap/css/bootstrap.css">
<link href="Jquery/jquery-ui.min.css" rel="stylesheet">
<link rel="stylesheet" href="biblio_composants.css">
<script src="Bootstrap/js/bootstrap.min.js"> </script>
<script src="Jquery/jquery-3.6.2.min.js"></script>
<script src="Jquery/jquery-ui.min.js"></script>
<script src="biblio_composants.js"></script>
<script src="AJAX.js"></script>


<script>


$(document).ready(function(){
    JCreerConnexion(); // pour afficher la connexion
    //AfficherAccueil();
});



// FONCTIONS A MODIF POUR LE AJAX


function AfficherAccueil(){
    
    $("#page").html("");
    ListPosts(authcode);
}



function AfficherMessagerie(){
    $("#page").html("");
    ListConv(authcode);
}

function EpinglerUnPost($postID) { 
    console.log("epingle");
    UpdateEpinglePost($postID,authcode);
}


function DesEpinglerUnPost($postID){
    console.log("desepingle");
    UpdateEpinglePost($postID,authcode);
}

function EpinglerUnMessage($mid){
    EpinglerMsgConv($mid, currentGroup, authcode);
    
}

function DesEpinglerUnMessage($mid){
    EpinglerUnMessage($mid);
}

function AfficherAppel(){
    $("#page").html("");
    ListCalendarsEvents(authcode, "intra");
    /* var appel={"titre":"Répétition tutti","date":"01/12/2019","commentaire":"Répétitions au capitole à 18h c'est très important de venir","sex":"0"};
    JCreerAppel(appel);
    JCreerAppel(appel);
    JCreerAppel(appel);
    JCreerAppel(appel);
    JCreerAppel(appel);
    JCreerAppel(appel);
    JCreerAppel(appel);
    JCreerAppel(appel); */
}

function AfficherCalendrier(){
    $("#page").html("");
    //ici obtenir la réponse de la requête 
    ListCalendarsEvents(authcode, "extra");

}

function CommentairesPosts($id){
    $id = $($id).attr("id_post");
    currentComm = $id;
    ListPostMessages($id,authcode);
}

function JEnvoyerCommentaire($commContent){
    console.log($commContent.value);
    $curText = $commContent.value;
    $curComm = currentComm;
    addComments($curText,$curComm,authcode);
}

function AfficherCreer(){
    //ici obtenir la réponse de la requête
    JCreerDropUpCreer();   
}

function LikePost($idPost){
    setLikePost($idPost,authcode);
}


function Connexion(){
    var tel=$("#tel").val();
    var mdp=$("#pwd").val();
    auth(tel,mdp);
}


function JRecupMessages(context){
    if($(context.target).attr("type")=="convp")
        return;
    var id=$(context.target).attr("type_id");
    //connexion à un groupe 
    console.log(id);
    var nomgroupe = $(context.target).text();
    console.log(nomgroupe);
    currentGroup = id;
    $("#page").html("");
    ListMsgConv(id,nomgroupe,user,authcode);
}

function JRecupId(){

    //var aid = 1;
    //ListCalendarsEvents(authcode,aid);
    //ListCallMembers(authcode,aid,eid);
}
function EnvoyerMessage(groupId,message,rep){
    $informations={"content":message,
                    "answerTo":rep,};
                    
    AddMsgConv(groupId, $informations);
}

function    LikerPost(idPost){
    LikePost(idPost);
}



</script>



<body>
    <span id="header"></span>
    <div id="page"></div>
    <span id="footer"></span>
</body>

